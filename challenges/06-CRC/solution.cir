# 3-bit CRC (Polynomial x^3 + x + 1, binary 1011) Example Solution
# Implements a 3-bit CRC shift register with feedback

# Macro definitions (using only NAND as a primitive gate)
NOT(x)      := NAND(x, x)
AND(x,y)    := NOT(NAND(x, y))
OR(x,y)     := NAND(NOT(x), NOT(y))
XOR(x,y)    := OR(AND(NOT(x), y), AND(x, NOT(y)))


# CRC state bits (shift register)
# Initial state is 0 for all bits
# Use next state signals to avoid multiple assignments
r0 = X
r1 = XOR(D(r0, 0), X)
r2 = XOR(D(r1, 0), X)
r3 = D(r2, 0)
r4 = XOR(D(r3, 0), X)

CRC = r4
